{
  "modelName": "Company",
  "tableName": "public.company",
  "description": "Company module schema with country code support",
  "fields": {
    "id": {
      "type": "integer",
      "primaryKey": true,
      "autoIncrement": true,
      "description": "Unique identifier for company"
    },
    "name": {
      "type": "string",
      "required": true,
      "maxLength": 255,
      "description": "Company name"
    },
    "tenantcode": {
      "type": "string",
      "required": true,
      "maxLength": 50,
      "unique": true,
      "description": "Unique tenant code for the company"
    },
    "userlicenses": {
      "type": "integer",
      "default": 0,
      "description": "Number of user licenses allocated"
    },
    "isactive": {
      "type": "boolean",
      "default": true,
      "description": "Company active status"
    },
    "systememail": {
      "type": "string",
      "format": "email",
      "required": true,
      "description": "System/technical email address"
    },
    "adminemail": {
      "type": "string",
      "format": "email",
      "required": true,
      "description": "Administrator email address"
    },
    "logourl": {
      "type": "string",
      "format": "url",
      "description": "URL to company logo"
    },
    "sidebarbgurl": {
      "type": "string",
      "format": "url",
      "description": "URL to sidebar background image"
    },
    "sourceschema": {
      "type": "string",
      "description": "Source schema reference"
    },
    "city": {
      "type": "string",
      "description": "City in address"
    },
    "street": {
      "type": "string",
      "description": "Street address"
    },
    "pincode": {
      "type": "string",
      "description": "Postal/ZIP code"
    },
    "state": {
      "type": "string",
      "description": "State/Province"
    },
    "country": {
      "type": "string",
      "description": "Country name"
    },
    "country_code": {
      "type": "string",
      "pattern": "\\+\\d{1,3}",
      "example": "+91",
      "description": "Country code with + prefix (e.g., +91 for India)"
    },
    "phone_number": {
      "type": "string",
      "maxLength": 20,
      "description": "Phone number without country code prefix"
    },
    "platform_name": {
      "type": "string",
      "description": "Name of the platform"
    },
    "platform_api_endpoint": {
      "type": "object",
      "description": "API endpoint configuration in JSON format"
    },
    "is_external": {
      "type": "boolean",
      "default": false,
      "description": "Whether company is external"
    },
    "has_wallet": {
      "type": "boolean",
      "default": false,
      "description": "Whether company has wallet enabled"
    },
    "currency": {
      "type": "string",
      "example": "INR",
      "description": "Currency code (e.g., INR, USD, EUR)"
    },
    "time_zone": {
      "type": "string",
      "example": "IST",
      "description": "Time zone for the company"
    },
    "created_at": {
      "type": "datetime",
      "readOnly": true,
      "description": "Record creation timestamp"
    },
    "updated_at": {
      "type": "datetime",
      "readOnly": true,
      "description": "Record last update timestamp"
    }
  },
  "endpoints": {
    "list": {
      "method": "GET",
      "path": "/api/company",
      "auth": "required",
      "description": "Get all companies"
    },
    "detail": {
      "method": "GET",
      "path": "/api/company/:id",
      "auth": "required",
      "description": "Get company by ID"
    },
    "byName": {
      "method": "GET",
      "path": "/api/company/name/:name",
      "auth": "required",
      "description": "Get company by name"
    },
    "create": {
      "method": "POST",
      "path": "/api/company",
      "auth": "required",
      "description": "Create new company",
      "body": {
        "required": ["name", "tenantcode", "systememail", "adminemail"],
        "optional": ["userlicenses", "isactive", "logourl", "sidebarbgurl", "sourceschema", "city", "street", "pincode", "state", "country", "country_code", "phone_number", "platform_name", "platform_api_endpoint", "is_external", "has_wallet", "currency", "time_zone"]
      }
    },
    "update": {
      "method": "PUT",
      "path": "/api/company/:id",
      "auth": "required",
      "description": "Update company by ID",
      "body": {
        "required": ["name", "userlicenses", "systememail", "adminemail", "isactive"],
        "optional": ["tenantcode", "logourl", "sidebarbgurl", "sourceschema", "city", "street", "pincode", "state", "country", "country_code", "phone_number", "platform_name", "platform_api_endpoint", "is_external", "has_wallet", "currency", "time_zone"]
      }
    },
    "delete": {
      "method": "DELETE",
      "path": "/api/company/:id",
      "auth": "required",
      "description": "Delete company by ID"
    }
  },
  "uiSections": {
    "overview": {
      "fields": ["name", "systememail", "adminemail", "userlicenses", "currency"],
      "description": "Quick overview of company"
    },
    "details": {
      "fields": ["name", "tenantcode", "userlicenses", "isactive", "systememail", "adminemail", "logourl", "sidebarbgurl", "sourceschema", "city", "street", "pincode", "state", "country", "country_code", "phone_number", "platform_name", "platform_api_endpoint", "is_external", "has_wallet", "currency", "created_at", "updated_at"],
      "description": "Complete company details"
    },
    "address": {
      "fields": ["street", "city", "state", "country", "pincode", "country_code", "phone_number"],
      "description": "Company address information"
    },
    "contact": {
      "fields": ["systememail", "adminemail"],
      "description": "Contact email addresses"
    },
    "settings": {
      "fields": ["userlicenses", "isactive", "is_external", "has_wallet", "currency", "platform_name", "time_zone"],
      "description": "Company settings"
    }
  },
  "validationRules": {
    "name": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 255
    },
    "tenantcode": {
      "type": "string",
      "required": true,
      "minLength": 1,
      "maxLength": 50,
      "pattern": "^[a-zA-Z0-9_-]+$",
      "message": "Tenant code must contain only alphanumeric characters, hyphens, and underscores"
    },
    "userlicenses": {
      "type": "integer",
      "required": true,
      "min": 0,
      "message": "User licenses must be a non-negative integer"
    },
    "systememail": {
      "type": "string",
      "required": true,
      "format": "email",
      "message": "Valid system email is required"
    },
    "adminemail": {
      "type": "string",
      "required": true,
      "format": "email",
      "message": "Valid admin email is required"
    },
    "isactive": {
      "type": "boolean",
      "required": true,
      "message": "isActive must be a boolean value"
    },
    "country_code": {
      "type": "string",
      "format": "country-code",
      "pattern": "^\\+[0-9]{1,3}$",
      "optional": true,
      "message": "Country code must be in format +XXX (e.g., +91)",
      "example": "+91"
    }
  },
  "relatedModules": [
    {
      "module": "Users",
      "api": "user",
      "relationship": "one-to-many",
      "filterKey": "company_id",
      "description": "Users belonging to this company"
    },
    {
      "module": "Departments",
      "api": "department",
      "relationship": "one-to-many",
      "filterKey": "company_id",
      "description": "Departments in this company"
    }
  ],
  "changeLog": {
    "v1.0": {
      "date": "2025-12-28",
      "changes": [
        "Added country_code field with + prefix format",
        "Added time_zone field",
        "Updated UI sections to include country_code in address section",
        "Updated model to handle country_code in create and update operations"
      ]
    }
  }
}
